<meta charset="utf-8">
<script>
  function getRandomInt(min,max){
   	return Math.floor(Math.random() * (max-min+1))+min;
   	   	}
  function getCard(){
  	var cards = ['6','7','8','9','10','J','Q','K','A'];
  	return cards[getRandomInt(0,cards.length - 1)]
    }
  function getSum(arr) {
            var sum = 0;

            for(i=0;i<=arr.length-1;i++){
               if(isNaN(arr[i]) == false){
               	  sum=sum + parseInt(arr[i]);
               }
               else if(arr[i] != 'A') {
               	    sum=sum+10;
               }
                     else if(sum > 21){
               	    	sum=sum+1;
               	    }
               	        else sum=sum+11;
               	
            }
            
  	 return sum;
  }

function getStatus() {
	 return ' Дилер: ' + dealer.join('  ') + ' Игрок: ' + player.join('  ') + '. ';
}


var dealer = [getCard()];
var player = [getCard(),getCard()];
var answer = '';
do {
	var sumP = getSum(player);
	//alert(sum);
	if(sumP == 21){
    	alert('Вы победили !!!' + ' ' + getStatus());
    	break;
    }
    if(sumP > 21){
        alert('Вы проиграли :( '+ ' ' + getStatus());
    	break;
    }
    answer = prompt(getStatus() + 'Хотите еще карту ? 1 - да , иначе - нет ');
        if ( answer == '1' ) {
        	  player.push(getCard());
    }
    while (getSum(dealer) < 17) {
    	 dealer.push(getCard());
     };       
    var sumD = getSum(dealer);

    if (sumD == 21) {
    	alert( ' У дилера Black Jack ! T_T ' + getStatus());
    } else if (sumD > 21) {
    	alert( ' У дилера перебор ' + getStatus());
    } else if (sumP == sumD){
    	alert( ' Ничья ' + getStatus());
    } else if( sumP > sumD){
    	 alert( ' Победа :) ' + getStatus());
    } else {
    	 alert( ' Проигрыш :( ' + getStatus());
    }

}  while(answer == '1');

</script>